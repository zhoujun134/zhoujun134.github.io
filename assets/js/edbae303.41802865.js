"use strict";(self.webpackChunkmy_docus=self.webpackChunkmy_docus||[]).push([[5332],{59865:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var r=t(74848),o=t(28453);const a={slug:"flexmark-java-used",title:"java \u4f7f\u7528 flexmark-java \u8fdb\u884c markdown \u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684 html \u4ee3\u7801",authors:{name:"zhoujun134",title:"\u4e0d\u8981\u7b49! \u4e0d\u7ba1\u60f3\u505a\u4ec0\u4e48, \u90fd\u8981\u7acb\u523b\u52a8\u8d77\u6765\u3002",url:"https://github.com/zhoujun134",image_url:"https://img.zbus.top/zbus/logo.jpg"},tags:["java","\u540e\u7aef"]},l="java \u4f7f\u7528 flexmark-java \u8fdb\u884c markdown \u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684 html \u4ee3\u7801",i={id:"flexmark/markdown\u8f6c html \u4ee3\u7801",title:"java \u4f7f\u7528 flexmark-java \u8fdb\u884c markdown \u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684 html \u4ee3\u7801",description:"img",source:"@site/docs/flexmark/01-markdown\u8f6c html \u4ee3\u7801.md",sourceDirName:"flexmark",slug:"/flexmark/flexmark-java-used",permalink:"/docs/flexmark/flexmark-java-used",draft:!1,unlisted:!1,tags:[{inline:!0,label:"java",permalink:"/docs/tags/java"},{inline:!0,label:"\u540e\u7aef",permalink:"/docs/tags/\u540e\u7aef"}],version:"current",sidebarPosition:1,frontMatter:{slug:"flexmark-java-used",title:"java \u4f7f\u7528 flexmark-java \u8fdb\u884c markdown \u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684 html \u4ee3\u7801",authors:{name:"zhoujun134",title:"\u4e0d\u8981\u7b49! \u4e0d\u7ba1\u60f3\u505a\u4ec0\u4e48, \u90fd\u8981\u7acb\u523b\u52a8\u8d77\u6765\u3002",url:"https://github.com/zhoujun134",image_url:"https://img.zbus.top/zbus/logo.jpg"},tags:["java","\u540e\u7aef"]},sidebar:"tutorialSidebar",previous:{title:"\u5206\u5e03\u5f0f\u4e8b\u52a1",permalink:"/docs/distribute/distributed-transaction-notes"},next:{title:"01-git\u4fee\u6539\u9ed8\u8ba4\u5206\u652fmain",permalink:"/docs/git/git-change-default-branch"}},s={},d=[{value:"\u5f00\u80c3\u83dc",id:"\u5f00\u80c3\u83dc",level:2},{value:"\u81ea\u5b9a\u4e49\u5bf9\u4e8e\u56fe\u7247\u7684\u6e32\u67d3\u903b\u8f91",id:"\u81ea\u5b9a\u4e49\u5bf9\u4e8e\u56fe\u7247\u7684\u6e32\u67d3\u903b\u8f91",level:2},{value:"\u81ea\u5b9a\u4e49\u4ee3\u7801\u6e32\u67d3\u903b\u8f91",id:"\u81ea\u5b9a\u4e49\u4ee3\u7801\u6e32\u67d3\u903b\u8f91",level:2},{value:"\u81ea\u5b9a\u4e49\u5217\u8868\u6e32\u67d3\u903b\u8f91",id:"\u81ea\u5b9a\u4e49\u5217\u8868\u6e32\u67d3\u903b\u8f91",level:2}];function m(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"java-\u4f7f\u7528-flexmark-java-\u8fdb\u884c-markdown-\u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684-html-\u4ee3\u7801",children:"java \u4f7f\u7528 flexmark-java \u8fdb\u884c markdown \u6587\u4ef6\u751f\u6210\u5bf9\u5e94\u7684 html \u4ee3\u7801"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://img.zbus.top/zbus/blog202406022029096.jpg",alt:"img"})}),"\n",(0,r.jsxs)(n.p,{children:["flexmark-java \u7684\u5b98\u65b9\u6587\u6863\u5730\u5740: ",(0,r.jsx)(n.a,{href:"https://github.com/vsch/flexmark-java",children:"\u70b9\u51fb\u8df3\u8f6c"})]}),"\n",(0,r.jsxs)(n.p,{children:["Flexmark-java \u4e00\u4e2a\u901a\u8fc7 java \u8bed\u8a00\u5373\u53ef\u5b9e\u73b0\u5c06 markdown \u5185\u5bb9\u8f6c\u6362\u4e3a\u5bf9\u5e94\u7684 html \u4ee3\u7801\u7684\u5e93\uff0c\u5176\u5bf9 markdown \u62e5\u6709\u5f88\u597d\u7684\u4e00\u4e2a\u652f\u6301\u3002\u5728\u8fdb\u884c\u535a\u5ba2\u6784\u5efa\u4e4b\u65f6\uff0c\u9047\u5230\u7684\u4e00\u4e2a\u91cd\u8981\u95ee\u9898\u5c31\u662f\u5c06 markdown \u6587\u4ef6\u6e32\u67d3\u4e3a\u5bf9\u5e94\u7684 html \u5185\u5bb9\u5448\u73b0\u51fa\u6765\u3002\u6700\u521d\u5728\u524d\u7aef\u5b9e\u73b0\u662f\u4f7f\u7528\u7684 ",(0,r.jsx)(n.a,{href:"https://github.com/markedjs/marked",children:"marked"})," \u5e93, \u7531\u4e8e\u81ea\u5df1\u5bf9\u4e8e\u524d\u7aef\u7684\u4f7f\u7528\u5e76\u4e0d\u591f\u719f\u7ec3\uff0c\u6240\u4ee5\u5728\u8fdb\u884c\u5f88\u591a\u5b9a\u5236\u5316\u7684\u6e32\u67d3 markdown \u7684\u5185\u5bb9\u65f6\uff0c\u90fd\u9700\u8981\u53bb\u7814\u7a76\u524d\u7aef\u7684\u4e00\u4e9b\u903b\u8f91\u548c\u5b9e\u73b0\uff0c\u53d8\u5f97\u5341\u5206\u9ebb\u70e6\uff0c\u540c\u65f6\uff0c\u5bf9\u4e8e\u540e\u7aef\u7684\u63a5\u53e3\u6570\u636e\u8fd4\u56de\u4e0a\uff0c\u76f4\u63a5\u8fd4\u56de markdown \u5185\u5bb9\u4e5f\u4e0d\u662f\u5f88\u5b89\u5168\uff0c\u6240\u4ee5\u4fbf\u6709\u4e86\uff0c\u5728\u540e\u7aef\u8fdb\u884c\u5b9e\u73b0\u5bf9\u5e94\u7684\u8f6c\u6362\u903b\u8f91\u6bd4\u8f83\u597d\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"Flexmark-java \u5728\u7f51\u4e0a\u8be6\u7ec6\u7684\u4f7f\u7528\u6587\u6863\uff0c\u611f\u89c9\u90fd\u6bd4\u8f83\u5c11\uff0c\u5bf9\u4e8e\u5b98\u7f51\u7ed9\u51fa\u7684\u4f7f\u7528\u6587\u6863\u4ecb\u7ecd\u7684\u6bd4\u8f83\u7c97\u7cd9\u3002\u6240\u4ee5\uff0c\u6211\u5c06\u5728\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e9b\u81ea\u5df1\u5bf9\u4e8e flexmark \u7684\u4f7f\u7528\u603b\u7ed3\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u5f00\u80c3\u83dc",children:"\u5f00\u80c3\u83dc"}),"\n",(0,r.jsx)(n.p,{children:"\u5f15\u5165 flexmark-java \u7684 maven \u4f9d\u8d56\uff0c\u5728 pom.xml \u6587\u4ef6\u4e2d\uff0c\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"        \x3c!-- markdown \u6587\u4ef6\u8f6c\u4e3a html \u6587\u4ef6--\x3e\n        <dependency>\n            <groupId>com.vladsch.flexmark</groupId>\n            <artifactId>flexmark-all</artifactId>\n            <version>0.64.8</version>\n        </dependency>\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6d4b\u8bd5\u7528\u4f8b:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package com.zj.zs.markdown;\n\nimport com.vladsch.flexmark.ext.autolink.AutolinkExtension;\nimport com.vladsch.flexmark.ext.emoji.EmojiExtension;\nimport com.vladsch.flexmark.ext.emoji.EmojiImageType;\nimport com.vladsch.flexmark.ext.emoji.EmojiShortcutType;\nimport com.vladsch.flexmark.ext.gfm.strikethrough.StrikethroughExtension;\nimport com.vladsch.flexmark.ext.gfm.tasklist.TaskListExtension;\nimport com.vladsch.flexmark.ext.tables.TablesExtension;\nimport com.vladsch.flexmark.ext.toc.TocExtension;\nimport com.vladsch.flexmark.html.HtmlRenderer;\nimport com.vladsch.flexmark.parser.Parser;\nimport com.vladsch.flexmark.util.ast.Document;\nimport com.vladsch.flexmark.util.data.DataHolder;\nimport com.vladsch.flexmark.util.data.MutableDataSet;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.Arrays;\nimport java.util.List;\n/**\n * @ClassName MarkdownTest\n * @Author zj\n * @Description markdown \u6587\u4ef6\u6d4b\u8bd5\n * @Date 2024/3/17 16:00\n * @Version v1.0\n **/\npublic class MarkdownTest {\n\n    final private static DataHolder OPTIONS = new MutableDataSet().set(Parser.EXTENSIONS, Arrays.asList(\n                    TocExtension.create(),\n                    // \u81ea\u5b9a\u4e49\u6269\u5c55\uff0c\u4e3a<pre>\u6807\u7b7e\u6dfb\u52a0line-numbers\u7684class\uff0c\u7528\u4e8eprism\u5e93\u4ee3\u7801\u5de6\u4fa7\u884c\u53f7\u5c55\u793a\n                    AutolinkExtension.create(),\n                    EmojiExtension.create(),\n                    StrikethroughExtension.create(),\n                    TaskListExtension.create(),\n                    TablesExtension.create()\n            ))// set GitHub table parsing options\n            .set(TablesExtension.WITH_CAPTION, false)\n            .set(TablesExtension.COLUMN_SPANS, false)\n            .set(TablesExtension.MIN_HEADER_ROWS, 1)\n            .set(TablesExtension.MAX_HEADER_ROWS, 1)\n            .set(TablesExtension.APPEND_MISSING_COLUMNS, true)\n            .set(TablesExtension.DISCARD_EXTRA_COLUMNS, true)\n            .set(TablesExtension.HEADER_SEPARATOR_COLUMN_MATCH, true)\n            // setup emoji shortcut options\n            // uncomment and change to your image directory for emoji images if you have it setup\n//                .set(EmojiExtension.ROOT_IMAGE_PATH, emojiInstallDirectory())\n            .set(EmojiExtension.USE_SHORTCUT_TYPE, EmojiShortcutType.GITHUB)\n            .set(EmojiExtension.USE_IMAGE_TYPE, EmojiImageType.IMAGE_ONLY);\n    static final Parser PARSER = Parser.builder(OPTIONS).build();\n    static final HtmlRenderer RENDERER = HtmlRenderer.builder(OPTIONS)\n            // \u7f29\u8fdb 2 \u5b57\u7b26\n            .indentSize(2)\n            .build();\n\n    public static void main(String[] args) throws IOException {\n        List<String> lines = Files.readAllLines(Path.of("/Users/zj/IdeaProjects/work/zjBootBlog/README.md"));\n        String content = String.join("\\n", lines);\n        Document document = PARSER.parse(content);\n        String html = RENDERER.render(document);\n        System.out.println("generate html : " + html);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u5c06 README.md \u4e2d\u7684 markdown \u6587\u4ef6\u5185\u5bb9\u751f\u6210\u5bf9\u5e94\u7684 html \u4ee3\u7801\u3001"}),"\n",(0,r.jsx)(n.p,{children:"\u4f8b\u5982\u6211\u7684 README.md \u6587\u4ef6\u5185\u5bb9\u4e3a:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"# \u4e2a\u4eba\u4f7f\u7528\u7684 spring boot \u811a\u624b\u67b6\n\n## \u9879\u76ee\u63cf\u8ff0\n\n## \u8868\n```sql\ncreate table zs_article\n(\n    title       varchar(255) default ''    null comment '\u6807\u9898',\n    id          bigint auto_increment comment '\u4e3b\u952e' primary key,\n    content     longtext                   null comment '\u5185\u5bb9',\n    create_time datetime     default NOW() null comment '\u521b\u5efa\u65f6\u95f4'\n        \n) comment '\u6587\u7ae0\u9875\u9762';\n```\n![1121212](https://img.zbus.top/zbus/blog202405102246409.jpg)\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u751f\u6210\u51fa\u6765\u7684 html \u4ee3\u7801\u4e3a:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<h1 id=\"\u4e2a\u4eba\u4f7f\u7528\u7684-spring-boot-\u811a\u624b\u67b6\">\u4e2a\u4eba\u4f7f\u7528\u7684 spring boot \u811a\u624b\u67b6</h1>\n<h2 id=\"\u9879\u76ee\u63cf\u8ff0\">\u9879\u76ee\u63cf\u8ff0</h2>\n<h2 id=\"\u8868\">\u8868</h2>\n<pre><code class=\"language-sql\">create table zs_article\n(\n    title       varchar(255) default ''    null comment '\u6807\u9898',\n    id          bigint auto_increment comment '\u4e3b\u952e' primary key,\n    content     longtext                   null comment '\u5185\u5bb9',\n    create_time datetime     default NOW() null comment '\u521b\u5efa\u65f6\u95f4'\n        \n) comment '\u6587\u7ae0\u9875\u9762';\n</code></pre>\n<p><img src=\"https://img.zbus.top/zbus/blog202405102246409.jpg\" alt=\"1121212\" /></p>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u5bf9\u4e8e\u56fe\u7247\u7684\u6e32\u67d3\u903b\u8f91",children:"\u81ea\u5b9a\u4e49\u5bf9\u4e8e\u56fe\u7247\u7684\u6e32\u67d3\u903b\u8f91"}),"\n",(0,r.jsxs)(n.p,{children:["\u6bd4\u5982\u4e0a\u9762\u6211\u4eec\u751f\u6210\u7684\u56fe\u7247\u4ee3\u7801\uff0c\u9700\u8981\u5728\u5bf9\u5e94\u7684 img \u6807\u7b7e\uff0c\u653e\u5728\u4e00\u4e2a\u5bb9\u5668 div \u4e2d\uff0c\u540c\u65f6\u7ed9\u5b83\u8bbe\u7f6e\u4e00\u4e9b\uff0c\u5b9a\u5236\u5316\u7684 class \u5c5e\u6027\uff0c\u6bd4\u5982\uff0c\u81ea\u5b9a\u4ee5\u7684\u7c7b\uff0c\u548c\u56fe\u7247\u653e\u5927\u7f29\u5c0f\u6240\u7528\u5230\u7684\u5c5e\u6027 data-zoomable \uff08\u53c2\u8003",(0,r.jsx)(n.a,{href:"https://github.com/francoischalifour/medium-zoom",children:"medium-zoom"})," \u7684\u4f7f\u7528\uff0c\u6216\u8005\u8bbf\u95ee\u6211\u7684\u4ecb\u7ecd\u6587\u7ae0:  ",(0,r.jsx)(n.a,{href:"https://zbus.top/web/detail/3dc7696cc83c4424aaeb060f3bc9f093",children:"vue3+ts \u5b9e\u73b0\u56fe\u7247\u70b9\u51fb\u653e\u5927\u7f29\u5c0f\u7684\u6548\u679c"}),"\uff09\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u90a3\u4e48\u5bf9\u4e8e flexmark \u5982\u4f55\u5b9e\u73b0\u5462\uff0c\u5373\u81ea\u5b9a\u4e49 \u56fe\u7247\u7684\u89e3\u6790\u903b\u8f91\uff0c\u8fd9\u91cc\u6211\u4eec\u5c31\u9700\u8981\u4f7f\u7528\u5230 NodeRenderer \u7c7b\u8fdb\u884c\u5b9e\u73b0\u3002\u5b9e\u73b0 ",(0,r.jsx)(n.code,{children:"NodeRenderingHandler.CustomNodeRenderer<T>"})," \u63a5\u53e3\u3002\u5176\u4e2d\u7684 render \u65b9\u6cd5\u5c31\u662f\u6211\u4eec\u8fdb\u884c\u81ea\u5b9a\u4e49\u903b\u8f91\u7684\u5b9e\u73b0\uff0c\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:' public class ImageCustomNodeRenderer implements NodeRenderingHandler.CustomNodeRenderer<Image> {\n        @Override\n        public void render(@NotNull Image node, @NotNull NodeRendererContext context, @NotNull HtmlWriter html) {\n\n            html.line();\n            // \u6e32\u67d3\u5305\u88f9\u56fe\u7247\u7684 div \u6807\u7b7e\n            html.withAttr()\n                    .attr("class", "zj-blog-content-img-container")\n                    .tag("div");\n\n            html.line();\n            html.indent();\n            // \u5f00\u59cb\u6e32\u67d3\u56fe\u7247\u6807\u7b7e\n            html.srcPosWithTrailingEOL(node.getChars()).withAttr()\n                    .attr("class", "zj-blog-content-img")\n                    .attr("data-zoomable", "")\n                    .attr("src", node.getUrl())\n                    .attr("alt", node.getText())\n                    .tag("img");\n            html.line();\n            // \u5173\u95ed\u56fe\u7247 img\n            html.tag("/img");\n            // \u65b0\u8d77\u4e00\u884c\n            html.line();\n            // \u5173\u95ed div\n            html.tag("/div");\n            html.line();\n        }\n    }\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5b9e\u73b0\u4e86 NodeRenderingHandler.CustomNodeRenderer \u63a5\u53e3\u4e4b\u540e\uff0c\u9700\u8981\u5c06\u8fd9\u4e2a\u81ea\u5b9a\u4e49\u7684\u8282\u70b9\u89e3\u6790\u7c7b\u6ce8\u5165\u5230\u6211\u4eec\u7684 html \u89e3\u6790\u5668\u914d\u7f6e (\u5373:  OPTIONS \u914d\u7f6e)\uff0c\u6ce8\u5165\u7684\u65b9\u5f0f\u662f\u4f7f\u7528 HtmlRendererExtension \u7684\u65b9\u5f0f\uff0c"}),"\n",(0,r.jsx)(n.p,{children:"\u6bd4\u5982\u6211\u4eec\u8fd9\u91cc\u81ea\u5b9a\u4e49\u5b9e\u73b0\u7684\u56fe\u7247\u6269\u5c55\u5668\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"package com.zj.zs.service.markdown.extension.img;\n\nimport com.vladsch.flexmark.html.HtmlRenderer;\nimport com.vladsch.flexmark.util.data.MutableDataHolder;\nimport org.jetbrains.annotations.NotNull;\n\n/**\n * @ClassName CustomExtension\n * @Author zj\n * @Description\n * @Date 2024/5/31 08:28\n * @Version v1.0\n **/\npublic class CustomImageExtension implements HtmlRenderer.HtmlRendererExtension {\n    @Override\n    public void rendererOptions(@NotNull MutableDataHolder options) {\n\n    }\n\n    @Override\n    public void extend(@NotNull HtmlRenderer.Builder htmlRendererBuilder, @NotNull String rendererType) {\n        htmlRendererBuilder.nodeRendererFactory(new CustomImageNodeRenderer.Factory());\n    }\n\n    public static CustomImageExtension create() {\n        return new CustomImageExtension();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u4e0a\u9762\u7684\u7c7b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86 CustomImageNodeRenderer \u7c7b\u6765\u627f\u8f7d\u521a\u521a\u6211\u4eec\u81ea\u5b9a\u7684\u89e3\u6790\u903b\u8f91\uff0c\u5176\u5177\u4f53\u7684\u5b9e\u73b0\u903b\u8f91\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"package com.zj.zs.service.markdown.extension.img;\n\nimport com.vladsch.flexmark.ast.Image;\nimport com.vladsch.flexmark.html.HtmlWriter;\nimport com.vladsch.flexmark.html.renderer.NodeRenderer;\nimport com.vladsch.flexmark.html.renderer.NodeRendererContext;\nimport com.vladsch.flexmark.html.renderer.NodeRendererFactory;\nimport com.vladsch.flexmark.html.renderer.NodeRenderingHandler;\nimport com.vladsch.flexmark.util.data.DataHolder;\nimport org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @ClassName CustomImageNodeRenderer\n * @Author zj\n * @Description\n * @Date 2024/6/1 10:35\n * @Version v1.0\n **/\npublic class CustomImageNodeRenderer implements NodeRenderer {\n    @Override\n    public @Nullable Set<NodeRenderingHandler<?>> getNodeRenderingHandlers() {\n        HashSet<NodeRenderingHandler<?>> set = new HashSet<>();\n        set.add(imageNodeRenderingHandler());\n        return set;\n    }\n\n    private NodeRenderingHandler<Image> imageNodeRenderingHandler() {\n        return new NodeRenderingHandler<>(Image.class, new ImageCustomNodeRenderer());\n    }\n\n    public static class Factory implements NodeRendererFactory {\n        @NotNull\n        @Override\n        public NodeRenderer apply(@NotNull DataHolder options) {\n            return new CustomImageNodeRenderer();\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u518d\u56de\u5230\u6211\u4eec\u7684\u89e3\u6790\u4ee3\u7801\uff0c\u628a CustomImageExtension \u6ce8\u5165\u5373\u53ef\u5b9e\u73b0\u5bf9\u5e94\u7684\u81ea\u5b9a\u4e49\u56fe\u7247\u89e3\u6790\u903b\u8f91\u3002\u5177\u4f53\u7684\u4ee3\u7801\u662f\uff0c\u5982\u4e0b:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package com.zj.zs.markdown;\n\nimport com.vladsch.flexmark.ext.autolink.AutolinkExtension;\nimport com.vladsch.flexmark.ext.emoji.EmojiExtension;\nimport com.vladsch.flexmark.ext.emoji.EmojiImageType;\nimport com.vladsch.flexmark.ext.emoji.EmojiShortcutType;\nimport com.vladsch.flexmark.ext.gfm.strikethrough.StrikethroughExtension;\nimport com.vladsch.flexmark.ext.gfm.tasklist.TaskListExtension;\nimport com.vladsch.flexmark.ext.tables.TablesExtension;\nimport com.vladsch.flexmark.ext.toc.TocExtension;\nimport com.vladsch.flexmark.html.HtmlRenderer;\nimport com.vladsch.flexmark.parser.Parser;\nimport com.vladsch.flexmark.util.ast.Document;\nimport com.vladsch.flexmark.util.data.DataHolder;\nimport com.vladsch.flexmark.util.data.MutableDataSet;\nimport com.zj.zs.service.markdown.extension.img.CustomImageExtension;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport static com.zj.zs.service.markdown.extension.toc.CustomTocNodeRenderer.TOC_HTML;\n\n/**\n * @ClassName MarkdownTest\n * @Author zj\n * @Description markdown \u6587\u4ef6\u6d4b\u8bd5\n * @Date 2024/3/17 16:00\n * @Version v1.0\n **/\npublic class MarkdownTest {\n\n    final private static DataHolder OPTIONS = new MutableDataSet().set(Parser.EXTENSIONS, Arrays.asList(\n                    TocExtension.create(),\n      \t\t\t\t\t\t\t// \u81ea\u5b9a\u4e49\u7684\u56fe\u7247\u89e3\u6790\u6269\u5c55\u5668\n                    CustomImageExtension.create(),\n                    // \u81ea\u5b9a\u4e49\u6269\u5c55\uff0c\u4e3a<pre>\u6807\u7b7e\u6dfb\u52a0line-numbers\u7684class\uff0c\u7528\u4e8eprism\u5e93\u4ee3\u7801\u5de6\u4fa7\u884c\u53f7\u5c55\u793a\n                    AutolinkExtension.create(),\n                    EmojiExtension.create(),\n                    StrikethroughExtension.create(),\n                    TaskListExtension.create(),\n                    TablesExtension.create()\n            ))// set GitHub table parsing options\n            .set(TablesExtension.WITH_CAPTION, false)\n            .set(TablesExtension.COLUMN_SPANS, false)\n            .set(TablesExtension.MIN_HEADER_ROWS, 1)\n            .set(TablesExtension.MAX_HEADER_ROWS, 1)\n            .set(TablesExtension.APPEND_MISSING_COLUMNS, true)\n            .set(TablesExtension.DISCARD_EXTRA_COLUMNS, true)\n            .set(TablesExtension.HEADER_SEPARATOR_COLUMN_MATCH, true)\n            // setup emoji shortcut options\n            // uncomment and change to your image directory for emoji images if you have it setup\n//                .set(EmojiExtension.ROOT_IMAGE_PATH, emojiInstallDirectory())\n            .set(EmojiExtension.USE_SHORTCUT_TYPE, EmojiShortcutType.GITHUB)\n            .set(EmojiExtension.USE_IMAGE_TYPE, EmojiImageType.IMAGE_ONLY);\n    static final Parser PARSER = Parser.builder(OPTIONS).build();\n    static final HtmlRenderer RENDERER = HtmlRenderer.builder(OPTIONS)\n            // \u7f29\u8fdb 2 \u5b57\u7b26\n            .indentSize(2)\n            .build();\n\n    public static void main(String[] args) throws IOException {\n        List<String> lines = Files.readAllLines(Path.of("/Users/zj/IdeaProjects/work/zjBootBlog/README.md"));\n        String content = String.join("\\n", lines);\n        Document document = PARSER.parse(content);\n        String html = RENDERER.render(document);\n        System.out.println("test html : " + html);\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u6700\u7ec8\u6211\u4eec\u751f\u6210\u7684\u4ee3\u7801\u5982\u4e0b:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<h1 id="\u4e2a\u4eba\u4f7f\u7528\u7684-spring-boot-\u811a\u624b\u67b6">\u4e2a\u4eba\u4f7f\u7528\u7684 spring boot \u811a\u624b\u67b6</h1>\n<h2 id="\u9879\u76ee\u63cf\u8ff0">\u9879\u76ee\u63cf\u8ff0</h2>\n<h2 id="\u8868">\u8868</h2>\n<pre><code class="language-sql">create table zs_article\n(\n    title       varchar(255) default \'\'    null comment \'\u6807\u9898\',\n    id          bigint auto_increment comment \'\u4e3b\u952e\' primary key,\n    content     longtext                   null comment \'\u5185\u5bb9\',\n    create_time datetime     default NOW() null comment \'\u521b\u5efa\u65f6\u95f4\'\n        \n) comment \'\u6587\u7ae0\u9875\u9762\';\n</code></pre>\n<p>\n<div class="zj-blog-content-img-container">\n  <img class="zj-blog-content-img" data-zoomable="" src="https://img.zbus.top/zbus/blog202405102246409.jpg"\n       alt="1121212">\n  </img>\n</div>\n</p>\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u53ef\u4ee5\u770b\u5230\u4e0a\u9762\uff0c\u6211\u4eec\u7684\u56fe\u7247\u6e32\u67d3\u6210\u529f\u7684\u6dfb\u52a0\u4e86\u4e00\u4e2a div \u5305\u88f9\uff0c\u5e76\u4e14\u5305\u542b\u4e86\u81ea\u5b9a\u4e49\u7684 class \u5c5e\u6027\u548c data-zoomable \u5c5e\u6027\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u4ee3\u7801\u6e32\u67d3\u903b\u8f91",children:"\u81ea\u5b9a\u4e49\u4ee3\u7801\u6e32\u67d3\u903b\u8f91"}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u5b9e\u73b0\u8fc7\u7a0b\u548c\u56fe\u7247\u7684\u5b9e\u73b0\u903b\u8f91\u7c7b\u4f3c\u3002\u8fd9\u91cc\u76f4\u63a5\u4e0a\u4ee3\u7801\uff0cCustomPreCodeExtension \u7c7b\u4e3b\u8981\u7684\u6269\u5c55\u7c7b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"package com.zj.zs.service.markdown.extension.preCode;\n\nimport com.vladsch.flexmark.html.HtmlRenderer;\nimport com.vladsch.flexmark.util.data.MutableDataHolder;\nimport org.jetbrains.annotations.NotNull;\n\n/**\n * @ClassName CustomPreCodeExtension\n * @Author zj\n * @Description\n * @Date 2024/6/1 12:29\n * @Version v1.0\n **/\npublic class CustomPreCodeExtension implements HtmlRenderer.HtmlRendererExtension {\n\n    @Override\n    public void rendererOptions(@NotNull MutableDataHolder mutableDataHolder) {\n\n    }\n\n    @Override\n    public void extend(@NotNull HtmlRenderer.Builder htmlRendererBuilder, @NotNull String rendererType) {\n        htmlRendererBuilder.nodeRendererFactory(new CustomPreCodeNodeRenderer.Factory());\n    }\n\n    public static CustomPreCodeExtension create() {\n        return new CustomPreCodeExtension();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"CustomPreCodeNodeRenderer \u7c7b\u5b9e\u9645\u7684\u6e32\u67d3\u903b\u8f91\u5b9e\u73b0\u7c7b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package com.zj.zs.service.markdown.extension.preCode;\n\nimport com.vladsch.flexmark.ast.FencedCodeBlock;\nimport com.vladsch.flexmark.html.HtmlWriter;\nimport com.vladsch.flexmark.html.renderer.*;\nimport com.vladsch.flexmark.parser.Parser;\nimport com.vladsch.flexmark.util.data.DataHolder;\nimport com.vladsch.flexmark.util.misc.CharPredicate;\nimport com.vladsch.flexmark.util.sequence.BasedSequence;\nimport org.apache.commons.lang3.StringUtils;\nimport org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @ClassName CustomPreCodeNodeRenderer\n * @Author zj\n * @Description\n * @Date 2024/6/1 12:35\n * @Version v1.0\n **/\npublic class CustomPreCodeNodeRenderer implements NodeRenderer {\n    final private boolean codeContentBlock;\n\n    public CustomPreCodeNodeRenderer(DataHolder options) {\n        codeContentBlock = Parser.FENCED_CODE_CONTENT_BLOCK.get(options);\n    }\n    @Override\n    public @Nullable Set<NodeRenderingHandler<?>> getNodeRenderingHandlers() {\n        HashSet<NodeRenderingHandler<?>> set = new HashSet<>();\n        set.add(preCodeNodeRenderingHandler());\n        return set;\n    }\n\n    private NodeRenderingHandler<FencedCodeBlock> preCodeNodeRenderingHandler() {\n        return new NodeRenderingHandler<>(FencedCodeBlock.class, new PreCodeCustomNodeRenderer(codeContentBlock));\n    }\n\n\n    public static class Factory implements NodeRendererFactory {\n        @NotNull\n        @Override\n        public NodeRenderer apply(@NotNull DataHolder options) {\n            return new CustomPreCodeNodeRenderer(options);\n        }\n    }\n\n    public static class PreCodeCustomNodeRenderer implements NodeRenderingHandler.CustomNodeRenderer<FencedCodeBlock> {\n        private final boolean codeContentBlock;\n\n        public PreCodeCustomNodeRenderer(boolean codeContentBlock) {\n            this.codeContentBlock = codeContentBlock;\n        }\n\n        @Override\n        public void render(@NotNull FencedCodeBlock node, @NotNull NodeRendererContext context, @NotNull HtmlWriter html) {\n\n            BasedSequence info = node.getInfo();\n            html.line();\n            html.srcPosWithTrailingEOL(node.getChars())\n                    .withAttr()\n                    .tag("pre")\n                    .openPre();\n            if (info.isNotNull() && !info.isBlank()) {\n                BasedSequence language = node.getInfoDelimitedByAny(CharPredicate.SPACE_TAB);\n                // \u589e\u52a0\u884c\u53f7\u63a7\u5236\n                String className = context.getHtmlOptions().languageClassPrefix + language.unescape() + " line-numbers";\n                html.attr("class", className);\n            } else {\n                String noLanguageClass = context.getHtmlOptions().noLanguageClass.trim();\n                if (StringUtils.isNotBlank(noLanguageClass)) {\n                    html.attr("class", noLanguageClass);\n                }\n            }\n            html.srcPosWithTrailingEOL(node.getContentChars()).withAttr(CoreNodeRenderer.CODE_CONTENT).tag("code");\n            if (codeContentBlock) {\n                context.renderChildren(node);\n            } else {\n                html.text(node.getContentChars().normalizeEndWithEOL());\n            }\n            html.tag("/code");\n            html.tag("/pre").closePre();\n            html.lineIf(context.getHtmlOptions().htmlBlockCloseTagEol);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u5b9e\u73b0\u7684\u4e3b\u8981\u81ea\u5b9a\u4e49\u903b\u8f91\u662f\u5728\u4f7f\u7528 prism \u7ec4\u4ef6\u6e32\u67d3\u6240\u9700\u8981\u7684 \u81ea\u5b9a\u4e49 class \u5c5e\u6027  line-numbers\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u81ea\u5b9a\u4e49\u5217\u8868\u6e32\u67d3\u903b\u8f91",children:"\u81ea\u5b9a\u4e49\u5217\u8868\u6e32\u67d3\u903b\u8f91"}),"\n",(0,r.jsx)(n.p,{children:"\u4e3b\u8981\u662f\u6211\u7684\u535a\u5ba2\u6e32\u67d3\u662f\u5bf9\u4e8e\u5217\u8868\u7684\u663e\u793a\u6709\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684 class \u7c7b\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e5f\u8fdb\u884c\u4e86\u4e00\u4e9b\u5217\u8868\u7684\u81ea\u5b9a\u4e49\u6e32\u67d3\u903b\u8f91\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u5bf9\u5e94\u7684\u5904\u7406\u903b\u8f91\u548c\u56fe\u7247\u7684\u5904\u7406\u903b\u8f91\u4e00\u6837\u3002"}),"\n",(0,r.jsx)(n.p,{children:"CustomListExtension \u7c7b\u7684\u5b9e\u73b0\u903b\u8f91\u5982\u4e0b:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"package com.zj.zs.service.markdown.extension.list;\n\nimport com.vladsch.flexmark.html.HtmlRenderer;\nimport com.vladsch.flexmark.util.data.MutableDataHolder;\nimport org.jetbrains.annotations.NotNull;\n\n/**\n * @ClassName CustomListExtension\n * @Author zj\n * @Description\n * @Date 2024/6/1 12:03\n * @Version v1.0\n **/\npublic class CustomListExtension implements HtmlRenderer.HtmlRendererExtension {\n    @Override\n    public void rendererOptions(@NotNull MutableDataHolder mutableDataHolder) {\n\n    }\n    @Override\n    public void extend(@NotNull HtmlRenderer.Builder htmlRendererBuilder, @NotNull String rendererType) {\n        htmlRendererBuilder.nodeRendererFactory(new CustomListNodeRenderer.Factory());\n    }\n\n    public static CustomListExtension create() {\n        return new CustomListExtension();\n    }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5217\u8868\u7684\u5b9e\u9645\u6e32\u67d3\u903b\u8f91 CustomListNodeRenderer \u7c7b\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'package com.zj.zs.service.markdown.extension.list;\n\nimport com.vladsch.flexmark.ast.BulletList;\nimport com.vladsch.flexmark.ast.OrderedList;\nimport com.vladsch.flexmark.html.HtmlWriter;\nimport com.vladsch.flexmark.html.renderer.NodeRenderer;\nimport com.vladsch.flexmark.html.renderer.NodeRendererContext;\nimport com.vladsch.flexmark.html.renderer.NodeRendererFactory;\nimport com.vladsch.flexmark.html.renderer.NodeRenderingHandler;\nimport com.vladsch.flexmark.util.data.DataHolder;\nimport org.jetbrains.annotations.NotNull;\nimport org.jetbrains.annotations.Nullable;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n/**\n * @ClassName CustomListNodeRenderer\n * @Author zj\n * @Description\n * @Date 2024/6/1 12:04\n * @Version v1.0\n **/\npublic class CustomListNodeRenderer implements NodeRenderer {\n    @Override\n    public @Nullable Set<NodeRenderingHandler<?>> getNodeRenderingHandlers() {\n        HashSet<NodeRenderingHandler<?>> set = new HashSet<>();\n        set.add(bulletListNodeRenderingHandler());\n        set.add(orderedListNodeRenderingHandler());\n        return set;\n    }\n\n    private NodeRenderingHandler<BulletList> bulletListNodeRenderingHandler() {\n        return new NodeRenderingHandler<>(BulletList.class, new BulletListCustomNodeRenderer());\n    }\n\n    private NodeRenderingHandler<OrderedList> orderedListNodeRenderingHandler() {\n        return new NodeRenderingHandler<>(OrderedList.class, new OrderedListCustomNodeRenderer());\n    }\n\n    public static class Factory implements NodeRendererFactory {\n        @NotNull\n        @Override\n        public NodeRenderer apply(@NotNull DataHolder options) {\n            return new CustomListNodeRenderer();\n        }\n    }\n\n    /**\n     * \u6709\u5e8f\u5217\u8868\u5904\u7406\n     */\n    public static class OrderedListCustomNodeRenderer implements NodeRenderingHandler.CustomNodeRenderer<OrderedList> {\n        @Override\n        public void render(@NotNull OrderedList node, @NotNull NodeRendererContext context, @NotNull HtmlWriter html) {\n            html.line().indent();\n            html.withAttr()\n                    .attr("class", "zj-custom-ul")\n                    .tag("ol");\n            // \u6e32\u67d3\u5217\u8868\u9879\n            context.renderChildren(node);\n            html.tag("/ol");\n        }\n    }\n    /**\n     * \u65e0\u5e8f\u5217\u8868\u5904\u7406\n     */\n    public static class BulletListCustomNodeRenderer implements NodeRenderingHandler.CustomNodeRenderer<BulletList> {\n        @Override\n        public void render(@NotNull BulletList node, @NotNull NodeRendererContext context, @NotNull HtmlWriter html) {\n\n            html.line().indent();\n            html.withAttr()\n                    .attr("class", "zj-custom-ul")\n                    .tag("ul");\n            // \u6e32\u67d3\u5217\u8868\u9879\n            context.renderChildren(node);\n            html.tag("/ul");\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u540c\u6837\u5728\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u6211\u4eec\u90fd\u9700\u8981\u5c06\u4e0a\u9762\u7684\u81ea\u5b9a\u4e49\u6269\u5c55 HtmlRendererExtension \u6ce8\u5165\u5230\u89e3\u6790\u5668\u7684\u914d\u7f6e\u4e2d\u624d\u4f1a\u751f\u6548\uff01"}),"\n",(0,r.jsx)(n.p,{children:"\u597d\u4e86\uff0c\u4ee5\u4e0a\u5c31\u662f\u6211\u5728\u4f7f\u7528 flexmark \u7684\u4e00\u4e9b\u603b\u7ed3\u5427\uff0c\u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u6240\u5e2e\u52a9\uff0c\u6b22\u8fce\u5927\u5bb6\uff0c\u7559\u8a00\u4ea4\u6d41\u3002"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://img.zbus.top/zbus/blog202406022116847.jpg",alt:"img"})})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>i});var r=t(96540);const o={},a=r.createContext(o);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);