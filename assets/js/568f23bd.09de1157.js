"use strict";(self.webpackChunkmy_docus=self.webpackChunkmy_docus||[]).push([[4467],{69980:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>m,toc:()=>c});var o=t(74848),r=t(28453);const s={slug:"docusaurus-add-comments",title:"docusaurus \u5b9e\u73b0\u81ea\u5b9a\u4e49\u8bc4\u8bba(\u8c03\u7528\u540e\u7aef\u7684\u63a5\u53e3)",authors:{name:"Gao Wei",title:"Docusaurus Core Team",url:"https://github.com/wgao19",image_url:"https://github.com/wgao19.png"},tags:["hola","docusaurus","comments"],image:"https://img.zbus.top/zbus/blog202403150008819.webp"},a=void 0,m={id:"Docusaurus/2024-06-13-docusaurus-add-comments",title:"docusaurus \u5b9e\u73b0\u81ea\u5b9a\u4e49\u8bc4\u8bba(\u8c03\u7528\u540e\u7aef\u7684\u63a5\u53e3)",description:"\u9996\u5148\u7f16\u5199\u8bc4\u8bba\u7684\u7ec4\u4ef6\u4fe1\u606f, \u521b\u5efa\u4e00\u4e2a\u8bc4\u8bba\u7684 Comments.tsx \u8fd9\u91cc\u4f1a\u4e66\u5199\u6211\u4eec\u5bf9\u5e94\u7684\u8bc4\u8bba\u4fe1\u606f",source:"@site/docs/04-Docusaurus/2024-06-13-docusaurus-add-comments.md",sourceDirName:"04-Docusaurus",slug:"/Docusaurus/docusaurus-add-comments",permalink:"/docs/Docusaurus/docusaurus-add-comments",draft:!1,unlisted:!1,tags:[{inline:!0,label:"hola",permalink:"/docs/tags/hola"},{inline:!0,label:"docusaurus",permalink:"/docs/tags/docusaurus"},{inline:!0,label:"comments",permalink:"/docs/tags/comments"}],version:"current",frontMatter:{slug:"docusaurus-add-comments",title:"docusaurus \u5b9e\u73b0\u81ea\u5b9a\u4e49\u8bc4\u8bba(\u8c03\u7528\u540e\u7aef\u7684\u63a5\u53e3)",authors:{name:"Gao Wei",title:"Docusaurus Core Team",url:"https://github.com/wgao19",image_url:"https://github.com/wgao19.png"},tags:["hola","docusaurus","comments"],image:"https://img.zbus.top/zbus/blog202403150008819.webp"},sidebar:"tutorialSidebar",previous:{title:"Docusaurus\u914d\u7f6edocs\u7684\u8bc4\u8bba\u63d2\u4ef6",permalink:"/docs/Docusaurus/Docusauruspei-zhi-docsde-ping-lun-cha-jian"},next:{title:"git \u4f7f\u7528\u624b\u518c",permalink:"/docs/category/git-\u4f7f\u7528\u624b\u518c"}},i={},c=[];function l(n){const e={code:"code",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.p,{children:"\u9996\u5148\u7f16\u5199\u8bc4\u8bba\u7684\u7ec4\u4ef6\u4fe1\u606f, \u521b\u5efa\u4e00\u4e2a\u8bc4\u8bba\u7684 Comments.tsx \u8fd9\u91cc\u4f1a\u4e66\u5199\u6211\u4eec\u5bf9\u5e94\u7684\u8bc4\u8bba\u4fe1\u606f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// src/components/Comments/Comments.tsx\nimport React, {useEffect, useState} from 'react';\nimport styles from './Comments.module.css';\nimport {useBlogPost} from \"@docusaurus/theme-common/internal\";\nimport {ICommentInfo, ICommentSubmitRequest} from \"@site/src/utils/interface/zjType\";\nimport {getCommentListByArticleId, submitComment} from \"@site/src/utils/articleApi\"; // \u5f15\u5165 CSS \u6a21\u5757\n// \u5f15\u5165 Docusaurus \u7684 DocPageContext\n\ninterface CommentsProps {\n    // \u5982\u679c\u6709\u7279\u5b9a\u7684 props \u53ef\u4ee5\u5728\u8fd9\u91cc\u5b9a\u4e49\n}\n\nconst Comments: React.FC<CommentsProps> = () => {\n    // \u4f7f\u7528 useContext \u94a9\u5b50\u6765\u8bbf\u95ee\u5f53\u524d\u6587\u6863\u9875\u9762\u7684\u4e0a\u4e0b\u6587\n    const {metadata} = useBlogPost();\n\n    const [comments, setComments] = useState<ICommentInfo[]>([]);\n    const [newComment, setNewComment] = useState<string>('');\n    const [userName, setUserName] = useState<string>('');\n    const [userEmail, setUserEmail] = useState<string>('');\n    const [commentTitle, setCommentTitle] = useState<string>('# \u6b22\u8fce\u7559\u4e0b\u60a8\u7684\u5b9d\u8d35\u8bc4\u8bba');\n    // \u5934\u50cf\u7ec4\u4ef6\n    const AvatarSVG = ({\n                           char,\n                           size = 50,\n                           color = 'var(--zj-comment-author-font-color)',\n                           bgColor = 'var(--ifm-color-primary-light)'\n                       }) => {\n        const fontSize = size * 0.8;\n        return (\n            <svg\n                width={size} /* \u8bbe\u7f6e\u56fa\u5b9a\u5bbd\u5ea6 */\n                height={size} /* \u8bbe\u7f6e\u56fa\u5b9a\u9ad8\u5ea6 */\n                viewBox=\"0 0 100 100\"\n                style={{\n                    backgroundColor: bgColor,\n                    borderRadius: '50%',\n                    display: 'inline-block',\n                    verticalAlign: 'middle',\n                    fontSize: fontSize,\n                    fontWeight: 'bold'\n                }}\n            >\n                <text x=\"50%\" y=\"50%\" dominantBaseline=\"middle\" textAnchor=\"middle\" fill={color}>\n                    {char}\n                </text>\n            </svg>\n        );\n    };\n    // \u7ec4\u4ef6\u6302\u8f7d\u5b8c\u6210\u540e\u83b7\u53d6\u8bc4\u8bba\u5217\u8868\n    useEffect(() => {\n        fetchCommentsFromServer().then(r => {\n        });\n    }, []); // \u7a7a\u4f9d\u8d56\u6570\u7ec4\u8868\u793a\u8fd9\u4e2a effect \u53ea\u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u65f6\u8fd0\u884c\u4e00\u6b21\n    // \u4fa6\u542c newComment \u7684\u53d8\u5316\uff0c\u5982\u679c\u4e3a \"\" \u5219\u91cd\u7f6e commentTitle\n    useEffect(() => {\n        // \u5f53\u8bc4\u8bba\u7684\u8f93\u5165\u6846\u4e3a\u7a7a\u65f6\uff0c\u91cd\u7f6e\u8bc4\u8bba\u7684\u6807\u9898\uff0c\u56de\u590d\u7684\u8bc4\u8bba id\uff0c\u7236id\n        if (newComment === '') {\n            setCommentTitle('# \u6b22\u8fce\u7559\u4e0b\u60a8\u7684\u5b9d\u8d35\u8bc4\u8bba');\n            setReplyingCommentId(''); // \u9690\u85cf\u56de\u590d\u8f93\u5165\u533a\u57df\n            setParentCommentId(''); // \u9690\u85cf\u56de\u590d\u8f93\u5165\u533a\u57df\n        }\n    }, [newComment]); // \u4f9d\u8d56\u6570\u7ec4\u5305\u542b newComment\n\n    const fetchCommentsFromServer = async () => {\n        const commentsRes = await getCommentListByArticleId(metadata.source);\n        if (commentsRes && commentsRes.data) {\n            setComments(commentsRes.data);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        // \u9a8c\u8bc1\u7528\u6237\u540d\u548c\u90ae\u7bb1\u662f\u5426\u5df2\u586b\u5199\n        if (!userName || !userEmail) {\n            alert('\u7528\u6237\u540d\u548c\u90ae\u7bb1\u4e0d\u80fd\u4e3a\u7a7a\uff01');\n            return;\n        }\n\n        const submitRequest: ICommentSubmitRequest = {\n            articleId: metadata.source,\n            author: userName,\n            email: userEmail,\n            content: newComment,\n            parentCommentId: parentCommentId,\n            replyCommentId: replyingCommentId,\n        }\n        await submitComment(submitRequest).then(resp => {\n            // console.log(\"resp=\", resp);\n        })\n        // \u8fd9\u91cc\u5e94\u8be5\u662f\u8c03\u7528\u540e\u7aef API \u63d0\u4ea4\u65b0\u8bc4\u8bba\u7684\u903b\u8f91\n        const newCommentsRes = await getCommentListByArticleId(metadata.source);\n        if (newCommentsRes) {\n            const newComments = newCommentsRes.data;\n            setComments(newComments);\n            setNewComment(''); // \u6e05\u7a7a\u8f93\u5165\u6846\n            setUserName(''); // \u6e05\u7a7a\u7528\u6237\u540d\u8f93\u5165\u6846\n            setUserEmail(''); // \u6e05\u7a7a\u90ae\u7bb1\u8f93\u5165\u6846\n            setReplyingCommentId(''); // \u9690\u85cf\u56de\u590d\u8f93\u5165\u533a\u57df\n            setParentCommentId(''); // \u9690\u85cf\u56de\u590d\u8f93\u5165\u533a\u57df\n            setCommentTitle('# \u6b22\u8fce\u7559\u4e0b\u60a8\u7684\u5b9d\u8d35\u8bc4\u8bba')\n        }\n    };\n\n    // ...\u5176\u4ed6\u72b6\u6001\u4fdd\u6301\u4e0d\u53d8\n    // \u7528\u4e8e\u8ddf\u8e2a\u5f53\u524d\u56de\u590d\u7684\u7236\u8bc4\u8bbaID\n    const [parentCommentId, setParentCommentId] = useState<string | null>(null);\n    // \u7528\u4e8e\u8ddf\u8e2a\u5f53\u524d\u56de\u590d\u7684\u8bc4\u8bbaID\n    const [replyingCommentId, setReplyingCommentId] = useState<string | null>(null);\n\n\n    // \u63d0\u4ea4\u56de\u590d\u8bc4\u8bba\u7684\u5185\u5bb9\n    const handleOnReplying = (event: React.MouseEvent, curComment: ICommentInfo, parentCommentId?: string) => {\n        event.preventDefault(); // \u5982\u679c\u4f60\u9700\u8981\u963b\u6b62\u9ed8\u8ba4\u884c\u4e3a\n        console.log(\"\u6765\u6e90: commentId=\", JSON.stringify(curComment), \" parentCommentId=\", parentCommentId);\n        setParentCommentId(parentCommentId)\n        setReplyingCommentId(curComment.commentId)\n        setNewComment(userName + \" \u56de\u590d \" + curComment.author + \": \")\n        setCommentTitle('# \u56de\u590d ' + curComment.author + ' \u7684\u8bc4\u8bba ')\n        // \u70b9\u51fb\u56de\u590d\u65f6\uff0c\u91cd\u5b9a\u5411\u5230\u8868\u5355\u5904\u3002\n        if (window.location.href.endsWith(\"#submitCommentForm\")) {\n            window.location.href = window.location.href + \"\"\n        } else {\n            window.location.href += '#submitCommentForm'\n        }\n    };\n    // \u6e32\u67d3\u6bcf\u6761\u8bc4\u8bba\u53ca\u5176\u56de\u590d\u6309\u94ae\u548c\u56de\u590d\u8868\u5355\n    const commentItem = (comment: ICommentInfo, parentCommentId?: string) => (\n        <li key={comment.commentId} className={styles.commentItem}>\n            <div className={styles.commentItemUp}>\n                <AvatarSVG char={comment.author[0]}/>\n                <p className={styles.commentItemContent}>\n                    {comment.content}\n                </p>\n            </div>\n            <div className={styles.commentItemDown}>\n                <p className={styles.commentCreateTime}>{comment.createTime}</p>\n                <a href=\"#submitCommentForm\" onClick={e => handleOnReplying(e, comment, parentCommentId)}>\u56de\u590d</a>\n            </div>\n            {\n                comment.children && comment.children.length > 0 ? (\n                    <>\n                        <div className={styles.commentListContainer}>\n                            <ul>\n                                {comment.children.map((childComment) => (\n                                    commentItem(childComment, parentCommentId)\n                                ))}\n                            </ul>\n                        </div>\n                    </>) : (<> </>)\n            }\n        </li>\n    );\n    const submitForm = () => (\n        <div className={styles.commentsContainer}>\n            <form id='submitCommentForm' onSubmit={handleSubmit} className={styles.commentForm}>\n                <div className={styles.commentTitle}>\n                    <h2>{commentTitle}</h2>\n                </div>\n                {/* \u7528\u6237\u540d\u548c\u90ae\u7bb1\u8f93\u5165\u6846\u5bb9\u5668 */}\n                <div className={styles.inputGroup}>\n                    {/* \u7528\u6237\u540d\u8f93\u5165\u6846 */}\n                    <input\n                        type=\"text\"\n                        value={userName}\n                        onChange={(e) => setUserName(e.target.value)}\n                        placeholder=\"\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d\"\n                        className={styles.inputFieldLeft}\n                        required\n                    />\n                    {/* \u90ae\u7bb1\u8f93\u5165\u6846 */}\n                    <input\n                        type=\"email\"\n                        value={userEmail}\n                        onChange={(e) => setUserEmail(e.target.value)}\n                        placeholder=\"\u8f93\u5165\u4f60\u7684\u90ae\u7bb1\"\n                        className={styles.inputFieldRight}\n                        required\n                    />\n                </div>\n                <div className={styles.inputGroup}>\n                    {/* \u73b0\u6709\u8bc4\u8bba\u8f93\u5165\u6846 */}\n                    <textarea\n                        value={newComment}\n                        onChange={(e) => setNewComment(e.target.value)}\n                        placeholder=\"\u5199\u4e0b\u4f60\u7684\u8bc4\u8bba...\"\n                        className={styles.commentInput}\n                        required\n                    />\n                </div>\n                <div className={styles.inputGroup}>\n                    <button type=\"submit\" className={styles.commentButton}>\n                        \u63d0\u4ea4\u8bc4\u8bba\n                    </button>\n                </div>\n            </form>\n        </div>\n    )\n\n    return (\n        <div className={styles.commentsContainer}>\n            <h2># \u8bc4\u8bba\u5217\u8868</h2>\n            {\n                comments.length > 0 ? (\n                    <>\n                        <div className={styles.commentListContainer}>\n                            <ul>\n                                {comments.map((comment) => (\n                                    commentItem(comment, comment.commentId)\n                                ))}\n                            </ul>\n                        </div>\n                    </>\n                ) : (\n                    <p className={styles.noComments}>\u5f53\u524d\u6682\u65e0\u8bc4\u8bba, \u6b22\u8fce\u5927\u4f6c\u901a\u8fc7\u4e0b\u9762\u7684\u8868\u5355\u7559\u4e0b\u60a8\u7684\u8db3\u8ff9\u3002\u2764\ufe0f\ud83c\udf77\ud83c\udf6d\u2705\ud83d\udcaf</p> // \u5f53\u6ca1\u6709\u8bc4\u8bba\u65f6\u663e\u793a\n                )\n            }\n            {/*\u63d0\u4ea4\u8bc4\u8bba\u7684\u8868\u5355*/}\n            {submitForm()}\n        </div>\n    );\n};\n\nexport default Comments;\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u4e0a\u9762\u4ee3\u7801\u4e2d\u7684 css \u6837\u5f0f\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-css",children:"/* src/components/Comments/Comments.module.css */\n.commentsContainer {\n    margin: 20px 0;\n}\n\n.commentsContainer li {\n    list-style-type: none;\n}\n\n.commentItem {\n    padding: 10px;\n    margin-bottom: 8px;\n}\n.commentItemContent {\n    margin-left: 10px;\n    margin-bottom: 8px;\n    max-width: 80%; /* \u6216\u8005\u6839\u636e\u9700\u8981\u8bbe\u7f6e\u4e00\u4e2a\u5408\u9002\u7684\u503c */\n    word-break: break-word; /* \u5141\u8bb8\u957f\u5355\u8bcd\u5728\u8fb9\u754c\u5904\u65ad\u884c */\n}\n/* \u9650\u5236\u8bc4\u8bba\u5185\u5bb9\u7684\u5bbd\u5ea6\uff0c\u9632\u6b62\u8fc7\u957f\u5bfc\u81f4\u5e03\u5c40\u95ee\u9898 */\n.commentItemContent p {\n    white-space: normal;\n    overflow-wrap: break-word;\n    word-wrap: break-word;\n    hyphens: auto;\n}\n.commentTitle {\n    margin-bottom: 10px;\n}\n\n.commentForm {\n    display: flex;\n    flex-direction: column;\n}\n\n.commentInput {\n    width: 100%;\n    padding: 8px;\n    margin-bottom: 10px;\n    border: 1px solid #ddd;\n    border-radius: 4px;     /* \u8f93\u5165\u6846\u5706\u89d2 */\n}\n\n.inputGroup {\n    display: flex;          /* \u4f7f\u7528 Flexbox \u5e03\u5c40 */\n    flex-direction: row;\n    justify-content: space-between; /* \u5de6\u53f3\u6392\u5217\uff0c\u4e2d\u95f4\u7559\u95f4\u9694 */\n    margin-bottom: 10px;    /* \u5bb9\u5668\u4e0b\u65b9\u7559\u767d */\n}\n\n.commentItemUp {\n    display: flex;\n    flex-direction: row;\n    align-items: center; /* \u5728\u4ea4\u53c9\u8f74\u7684\u5f00\u59cb\u4f4d\u7f6e\u5bf9\u9f50 */\n    /*justify-content: space-between; !* \u4e24\u7aef\u5bf9\u9f50 *!*/\n    /*margin-left: 50px;*/\n}\n.commentItemDown {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start; /* \u5728\u4ea4\u53c9\u8f74\u7684\u5f00\u59cb\u4f4d\u7f6e\u5bf9\u9f50 */\n    /*justify-content: space-between; !* \u4e24\u7aef\u5bf9\u9f50 *!*/\n    margin-left: 60px;\n}\n\n.commentCreateTime {\n    /* \u521b\u5efa\u65f6\u95f4\u6837\u5f0f\uff0c\u6839\u636e\u9700\u8981\u6dfb\u52a0 */\n    margin-right: 10px; /* \u4e0e\u56de\u590d\u6309\u94ae\u4fdd\u6301\u95f4\u9694 */\n    align-items: center; /* \u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50 */\n\n}\n\n.replyButton {\n    /* \u56de\u590d\u6309\u94ae\u6837\u5f0f */\n    margin-left: auto; /* \u63a8\u5230\u884c\u5c3e */\n}\n\n.inputFieldLeft {\n    flex: 1;                /* \u6bcf\u4e2a\u8f93\u5165\u6846\u5360\u636e\u4e00\u534a\u7a7a\u95f4 */\n    padding: 8px;           /* \u8f93\u5165\u6846\u5185\u8fb9\u8ddd */\n    box-sizing: border-box; /* \u8fb9\u6846\u8ba1\u7b97\u5728\u5bbd\u5ea6\u5185 */\n    border: 1px solid #ddd;/* \u8f93\u5165\u6846\u8fb9\u6846 */\n    border-radius: 4px;     /* \u8f93\u5165\u6846\u5706\u89d2 */\n}\n\n.inputFieldRight {\n    flex: 1;                /* \u6bcf\u4e2a\u8f93\u5165\u6846\u5360\u636e\u4e00\u534a\u7a7a\u95f4 */\n    padding: 8px;           /* \u8f93\u5165\u6846\u5185\u8fb9\u8ddd */\n    box-sizing: border-box; /* \u8fb9\u6846\u8ba1\u7b97\u5728\u5bbd\u5ea6\u5185 */\n    border: 1px solid #ddd;/* \u8f93\u5165\u6846\u8fb9\u6846 */\n    border-radius: 4px;     /* \u8f93\u5165\u6846\u5706\u89d2 */\n    margin-left: 10px;\n}\n.commentButton {\n    padding: 8px 16px;\n    background-color: var(--ifm-color-primary-darker2);;\n    color: white;\n    border: none;\n    cursor: pointer;\n}\n\n.commentButton:hover {\n    background-color: var(--ifm-color-primary-darker);;\n}\n\n.noComments {\n    text-align: center;\n    color: #666;\n    margin: 20px 0;\n}\n\n.commentListContainer {\n    margin-top: 20px;\n}\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u6837\u5f0f\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u7528\u5230\u4e86  --ifm-color-primary-darker2 \u548c --ifm-color-primary-darker \u53d8\u91cf\uff0c\u8fd9\u4e24\u4e2a\u53d8\u91cf\u5b9e\u5728\u5bf9\u5e94\u7684 src/css/custom.css \u4e2d\u5b9a\u4e49\u7684\u4e24\u4e2a\u989c\u8272\u3002\u8fd9\u91cc\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u4e3b\u9898\u8fdb\u884c\u914d\u7f6e\uff0c\u6211\u8fd9\u91cc\u7684\u914d\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"\n/* \u8fd9\u91cc\u662f\u56e0\u4e3a\u7528\u5230\u4e86 tailwind \u7684\u6837\u5f0f\uff0c\u5c06\u5176\u5f15\u5165 */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* \u4e3b\u9898\u7684\u76f8\u5173\u914d\u7f6e\u6587\u4ef6 */\n:root {\n  --ifm-color-primary: #2e8555;\n  --ifm-color-primary-dark: #29784c;\n  --ifm-color-primary-darker: #277148;\n  --ifm-color-primary-darker2: #277148;\n  --ifm-color-primary-darkest: #205d3b;\n  --ifm-color-primary-light: #33925d;\n  --ifm-color-primary-lighter: #359962;\n  --ifm-color-primary-lightest: #3cad6e;\n  --ifm-code-font-size: 95%;\n\n  --ifm-text-color: #333;\n  --ifm-secondary-text-color: #555;\n\n  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1);\n\n  --blog-item-background-color: linear-gradient(180deg, #fcfcfc, #fff);\n  --blog-item-shade: #f4f4f5;\n  --blog-item-shadow: 0 10px 18px #f1f5f9dd, 0 0 10px 0 #e4e4e7dd;\n\n  --ifm-heading-font-weight: 500;\n  --ifm-font-weight-bold: 520;\n\n  --ifm-font-family-base: misans, ui-sans-serif, system-ui, -apple-system;\n  --zj-comment-author-font-color: white;\n}\n\ndiv[class^='announcementBar_'] {\n  background: repeating-linear-gradient(\n          -35deg,\n          var(--ifm-color-primary-lighter),\n          var(--ifm-color-primary-lighter) 20px,\n          var(--ifm-color-primary-lightest) 10px,\n          var(--ifm-color-primary-lightest) 40px\n  );\n  font-weight: 700;\n}\n\n/* For readability concerns, you should choose a lighter palette in dark mode. */\n[data-theme='dark'] {\n  --ifm-color-primary: #25c2a0;\n  --ifm-color-primary-dark: #21af90;\n  --ifm-color-primary-darker: #1fa588;\n  --ifm-color-primary-darker2: #205d3b;\n  --ifm-color-primary-darkest: #1a8870;\n  --ifm-color-primary-light: #29d5b0;\n  --ifm-color-primary-lighter: #32d8b4;\n  --ifm-color-primary-lightest: #4fddbf;\n  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3);\n  --ifm-menu-color: #eceef1;\n  --ifm-text-color: var(--ifm-menu-color);\n\n  --blog-item-background-color: linear-gradient(180deg, #171717, #18181b);\n  --blog-item-shade: #27272a;\n  --blog-item-shadow: 0 10px 18px #25374833, 0 0 8px #25374866;\n\n  --zj-comment-author-font-color: black;\n}\n\n/*[data-theme='light'] .DocSearch {*/\n/*  !* --docsearch-primary-color: var(--ifm-color-primary); *!*/\n/*  !* --docsearch-text-color: var(--ifm-font-color-base); *!*/\n/*  --docsearch-muted-color: var(--ifm-color-secondary-darkest);*/\n/*  --docsearch-container-background: rgba(94, 100, 112, 0.7);*/\n/*  !* Modal *!*/\n/*  --docsearch-modal-background: var(--ifm-color-secondary-lighter);*/\n/*  !* Search box *!*/\n/*  --docsearch-searchbox-background: var(--ifm-color-secondary);*/\n/*  --docsearch-searchbox-focus-background: var(--ifm-color-white);*/\n/*  !* Hit *!*/\n/*  --docsearch-hit-color: var(--ifm-font-color-base);*/\n/*  --docsearch-hit-active-color: var(--ifm-color-white);*/\n/*  --docsearch-hit-background: var(--ifm-color-white);*/\n/*  !* Footer *!*/\n/*  --docsearch-footer-background: var(--ifm-color-white);*/\n/*}*/\n\n/*[data-theme='dark'] .DocSearch {*/\n/*  --docsearch-text-color: var(--ifm-font-color-base);*/\n/*  --docsearch-muted-color: var(--ifm-color-secondary-darkest);*/\n/*  --docsearch-container-background: rgba(47, 55, 69, 0.7);*/\n/*  !* Modal *!*/\n/*  --docsearch-modal-background: var(--ifm-background-color);*/\n/*  !* Search box *!*/\n/*  --docsearch-searchbox-background: var(--ifm-background-color);*/\n/*  --docsearch-searchbox-focus-background: var(--ifm-color-black);*/\n/*  !* Hit *!*/\n/*  --docsearch-hit-color: var(--ifm-font-color-base);*/\n/*  --docsearch-hit-active-color: var(--ifm-color-white);*/\n/*  --docsearch-hit-background: var(--ifm-color-emphasis-100);*/\n/*  !* Footer *!*/\n/*  --docsearch-footer-background: var(--ifm-background-surface-color);*/\n/*  --docsearch-key-gradient: linear-gradient(*/\n/*          -26.5deg,*/\n/*          var(--ifm-color-emphasis-200) 0%,*/\n/*          var(--ifm-color-emphasis-100) 100%*/\n/*  );*/\n/*}*/\na:hover {\n  @apply no-underline;\n}\n\n@layer components {\n  .bg-blog {\n    background: var(--blog-item-background-color);\n  }\n  .bg-blog-shade {\n    background: var(--blog-item-shade);\n  }\n}\n\nhtml,\nbody {\n  scroll-behavior: smooth;\n}\n\nbody {\n  font-family: misans, system-ui, -apple-system, 'PingFang SC',\n  'Microsoft YaHei';\n}\narticle .markdown > h2 {\n  font-size: 1.6em;\n}\n\narticle .markdown > h3 {\n  font-size: 1.4em;\n}\n\narticle .markdown > h4 {\n  font-size: 1.2em;\n}\n\narticle .markdown a:not(.hash-link) {\n  text-decoration: none;\n  font-weight: inherit;\n  border-bottom: 1px solid rgba(125, 125, 125, 0.3);\n  transition: border 0.3s ease-in-out;\n}\n\n.navbar__item {\n  display: inline-flex;\n}\n\n.navbar__link {\n  @apply flex items-center;\n}\n\n\n.navbar {\n  box-shadow: none;\n  background-color: transparent;\n}\n\n.navbar-sidebar__items {\n  height: calc(100% - var(--ifm-navbar-height) - 444px);\n}\n\n@media (max-width: 1100px) {\n  .navbar > .container,\n  .navbar > .container-fluid {\n    padding: 0;\n  }\n\n  .navbar__toggle {\n    display: inherit;\n  }\n\n  .navbar__item {\n    display: none;\n  }\n\n  .navbar__search-input {\n    width: 9rem;\n  }\n\n  .navbar-sidebar {\n    display: block;\n  }\n}\n\n\n.tag::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  transform: scaleX(0);\n  height: 2px;\n  background: var(--ifm-color-primary);\n  visibility: hidden;\n  transition: all 0.3s linear;\n}\n\n.tag:hover::after {\n  visibility: visible;\n  transform: scaleX(1);\n}\n\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u5230\u4e86 axios \uff08@site/src/utils/articleApi \u4e2d\u7684\u4ee3\u7801\uff09 \u7684\u65b9\u5f0f\uff0c\u8c03\u7528\u540e\u7aef\u7684\u8bc4\u8bba\u63a5\u53e3\u8fdb\u884c\u8bc4\u8bba\u6570\u636e\u7684\u63d0\u4ea4\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:'import request from "./service";\nimport {ICommentInfo, ICommentSubmitRequest, IResult} from "@site/src/utils/interface/zjType";\n\nexport async function getCommentListByArticleId(articleId: string) {\n    return await request({\n        url: \'/api/article/comment\',\n        method: \'get\',\n        params: {\n            articleId: articleId\n        }\n    }).then(resp => {\n        return JSON.parse(JSON.stringify(resp)) as IResult<ICommentInfo[]>;\n    }).catch(error => {\n        let {message} = error;\n\n        const result: IResult<ICommentInfo[]> = {\n            code: "-1",\n            message: "\u7cfb\u7edf\u5f00\u5c0f\u5dee\u4e86\uff01\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01" + message,\n            data: [] as ICommentInfo[]\n        };\n        return result;\n    })\n}\n\nexport async function submitComment(data: ICommentSubmitRequest) {\n    return await request({\n        url: \'/api/article/comment/submit\',\n        method: \'post\',\n        data: data\n    }).then(resp => {\n        return JSON.parse(JSON.stringify(resp)) as IResult<boolean>;\n    }).catch(error => {\n        let {message} = error;\n        // ElMessage.error({\n        //     message: "\u7cfb\u7edf\u5f00\u5c0f\u5dee\u4e86\uff01\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01" + message,\n        //     duration: 5 * 1000\n        // })\n        const result: IResult<ICommentInfo[]> = {\n            code: "-1",\n            message: "\u7cfb\u7edf\u5f00\u5c0f\u5dee\u4e86\uff01\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01" + message,\n            data: false\n        };\n        return result;\n    })\n}\n'})}),"\n",(0,o.jsx)(e.p,{children:"\u5176\u4e2d\u7684\u7c7b\u578b\u5b9a\u4e49 (@site/src/utils/interface/zjType)"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",children:"// \u54cd\u5e94\u4f53 ========================= start =======================================\nexport interface IResult<T> {\n    code: string\n    message: string\n    data?: T | any\n}\n\nexport interface Page<T> {\n    current: number,\n    total: number,\n    pageSize: number,\n    records?: T[]\n}\n\nexport interface ICommentInfo {\n    commentId?: string,\n    author: string,\n    content: string,\n    createTime?: string,\n    likeNum?: number,\n    children?: ICommentInfo[],\n    isShowSubmit?: boolean\n}\n\n// \u54cd\u5e94\u4f53 ========================= end =======================================\n\n// \u8bf7\u6c42\u4f53 ======================== start =======================================\nexport interface ICommentSubmitRequest {\n    articleId?: string,\n    parentCommentId?: string,\n    replyCommentId?: string,\n    author: string,\n    email: string,\n    content: string;\n}\n// \u8bf7\u6c42\u4f53 ======================== end =======================================\n\n"})}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u672c\u6b21\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u5c01\u88c5\u4e86 axios \u7684\u8bf7\u6c42\u903b\u8f91\uff0c\u5177\u4f53\u7684\u5c01\u88c5\u903b\u8f91\u5982\u4e0b\u56fe\u6240\u793a: "}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-typescript",metastring:"showLineNumbers",children:"import axios, {AxiosInstance, AxiosError, InternalAxiosRequestConfig} from 'axios';\nimport {IResult} from \"@site/src/utils/interface/zjType\";\n\n// \u8bbe\u7f6e axios \u9ed8\u8ba4\u914d\u7f6e\naxios.defaults.withCredentials = true;\n\n// \u521b\u5efa axios \u5b9e\u4f8b\nconst service: AxiosInstance = axios.create({\n    baseURL: \"https://zbus.top\", // \u786e\u4fdd\u8fd9\u662f\u6b63\u786e\u7684 baseURL\n    timeout: 15000,\n    headers: {'Content-Type': 'application/json;charset=utf-8'},\n});\n\nlet loading: any;\nlet requestCount: number = 0; // \u6b63\u5728\u8bf7\u6c42\u7684\u6570\u91cf\n\n// \u663e\u793a loading\nconst showLoading = () => {\n    if (requestCount === 0 && !loading) {\n        // \u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528 Element UI \u7684 Loading \u7ec4\u4ef6\uff0c\u6216\u8005\u60a8\u9009\u62e9\u7684\u5176\u4ed6\u5e93\n        // loading = ElLoading.service({\n        //   lock: true,\n        //   text: \"\u62fc\u547d\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e...\",\n        //   background: 'rgba(0, 0, 0, 0.7)',\n        // });\n    }\n    requestCount++;\n};\n\n// \u9690\u85cf loading\nconst hideLoading = () => {\n    requestCount--;\n    if (requestCount === 0 && loading) {\n        loading.close();\n    }\n};\n\n// \u8bf7\u6c42\u62e6\u622a\u5668\nservice.interceptors.request.use((config: InternalAxiosRequestConfig) => {\n    showLoading();\n    // \u5982\u679c\u662f GET \u8bf7\u6c42\u4e14\u6709 params \u53c2\u6570\uff0c\u5219\u5904\u7406\u53c2\u6570\n    if (config.method === 'get' && config.params) {\n        // \u8fd9\u91cc\u5bf9 config.url \u8fdb\u884c\u5904\u7406\uff0c\u5c06 params \u8f6c\u6362\u4e3a\u67e5\u8be2\u5b57\u7b26\u4e32\n        // \u8bf7\u6839\u636e\u60a8\u7684\u5b9e\u9645\u9700\u6c42\u8c03\u6574\u53c2\u6570\u7f16\u7801\u903b\u8f91\n    }\n    return config;\n}, (error: AxiosError) => {\n    return Promise.reject(error);\n});\n\n// \u54cd\u5e94\u62e6\u622a\u5668\nservice.interceptors.response.use((response) => {\n    hideLoading();\n    const result: IResult<any> = response.data;\n    // \u5904\u7406\u5176\u4ed6\u903b\u8f91\n    return response.data\n}, (error: AxiosError) => {\n    console.error('err' + error);\n    hideLoading();\n    let errorMsg: string = '\u8bf7\u6c42\u51fa\u73b0\u5f02\u5e38';\n    if (error.response) {\n        // \u670d\u52a1\u5668\u7aef\u8fd4\u56de\u7684\u5f02\u5e38\u4fe1\u606f\n        errorMsg = error.message || errorMsg;\n    } else if (error.request) {\n        // \u8bf7\u6c42\u5df2\u53d1\u51fa\uff0c\u4f46\u6ca1\u6709\u6536\u5230\u54cd\u5e94\n        errorMsg = '\u8bf7\u6c42\u5df2\u53d1\u51fa\uff0c\u4f46\u6ca1\u6709\u6536\u5230\u54cd\u5e94';\n    } else {\n        // \u53d1\u751f\u4e86\u89e6\u53d1\u8bf7\u6c42\u9519\u8bef\u7684\u95ee\u9898\n        errorMsg = error.message || errorMsg;\n    }\n    const errResult: IResult<object> = {\n        code: \"-1\",\n        message: errorMsg,\n        data: {},\n    }\n    return Promise.reject(errResult);\n});\n\nexport default service;\n\n"})})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(l,{...n})}):l(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>m});var o=t(96540);const r={},s=o.createContext(r);function a(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function m(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);